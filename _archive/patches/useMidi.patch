diff --git a/composables/useMidi.client.ts b/composables/useMidi.client 2.ts
index 603f956..095082d 100644
--- a/composables/useMidi.client.ts
+++ b/composables/useMidi.client 2.ts	
@@ -1,17 +1,12 @@
-import { onBeforeUnmount, ref } from 'vue'
-import type { MidiDeviceInfo, MidiMapping, MidiMessage } from '@/types/midi'
-import { defaultMidiMapping } from '@/domain/midiMapping'
+import { ref } from 'vue'
+import type { MidiDeviceInfo, MidiMapping, MidiMessage } from '~/types/midi'
+import { defaultMidiMapping } from '~/domain/midiMapping'
 
 export function useMidi() {
   const access = ref<MIDIAccess | null>(null)
   const inputs = ref<MidiDeviceInfo[]>([])
   const outputs = ref<MidiDeviceInfo[]>([])
   const mapping = ref<MidiMapping>(defaultMidiMapping())
-  const selectedInputId = ref<string | null>(null)
-  const selectedOutputId = ref<string | null>(null)
-  const listeners = ref<Set<(message: MidiMessage) => void>>(new Set())
-  let handlePageHide: (() => void) | null = null
-  let handlePageShow: (() => void) | null = null
 
   const supportsMidi = () => typeof navigator !== 'undefined' && Boolean((navigator as Navigator).requestMIDIAccess)
 
@@ -35,59 +30,31 @@ export function useMidi() {
     }
     access.value = await (navigator as Navigator).requestMIDIAccess({ sysex: false })
     refreshDevices()
-    if (access.value) {
-      access.value.onstatechange = () => {
-        refreshDevices()
-        attachSelectedInput()
-      }
-    }
-  }
-
-  const handleMidiMessage = (event: MIDIMessageEvent) => {
-    if (!event.data || event.data.length < 1) return
-    const status = event.data[0]
-    const data1 = event.data[1]
-    const data2 = event.data[2]
-    if (status === undefined) return
-    const type = status & 0xf0
-    const hasNoteData = typeof data1 === 'number' && typeof data2 === 'number'
-    const message: MidiMessage | null =
-      type === 0x90 && hasNoteData && data2 > 0
-        ? { type: 'noteon', note: data1, velocity: data2 / 127 }
-        : type === 0x80 && hasNoteData
-          ? { type: 'noteoff', note: data1, velocity: data2 / 127 }
-          : type === 0x90 && hasNoteData && data2 === 0
-            ? { type: 'noteoff', note: data1, velocity: data2 / 127 }
-            : status === 0xf8
-              ? { type: 'clock' }
-              : status === 0xfa
-                ? { type: 'start' }
-                : status === 0xfc
-                  ? { type: 'stop' }
-                  : null
-    if (!message) return
-    listeners.value.forEach((cb) => cb(message))
-  }
-
-  const detachInputs = () => {
-    access.value?.inputs.forEach((input) => {
-      input.onmidimessage = null
-    })
-  }
-
-  const attachSelectedInput = () => {
-    detachInputs()
-    if (!selectedInputId.value) return
-    const input = access.value?.inputs.get(selectedInputId.value)
-    if (input) {
-      input.onmidimessage = handleMidiMessage
-    }
   }
 
   const listen = (cb: (message: MidiMessage) => void) => {
-    listeners.value.add(cb)
-    attachSelectedInput()
-    return () => listeners.value.delete(cb)
+    access.value?.inputs.forEach((input: MIDIInput) => {
+      input.onmidimessage = (event: MIDIMessageEvent) => {
+        if (!event.data || event.data.length < 3) return
+        const status = event.data[0]
+        const data1 = event.data[1]
+        const data2 = event.data[2]
+        if (status === undefined || data1 === undefined || data2 === undefined) return
+
+        const type = status & 0xf0
+        if (type === 0x90 && data2 > 0) {
+          cb({ type: 'noteon', note: data1, velocity: data2 / 127 })
+        } else if (type === 0x80 || (type === 0x90 && data2 === 0)) {
+          cb({ type: 'noteoff', note: data1, velocity: data2 / 127 })
+        } else if (status === 0xf8) {
+          cb({ type: 'clock' })
+        } else if (status === 0xfa) {
+          cb({ type: 'start' })
+        } else if (status === 0xfc) {
+          cb({ type: 'stop' })
+        }
+      }
+    })
   }
 
   const send = (deviceId: string, message: MidiMessage) => {
@@ -114,97 +81,18 @@ export function useMidi() {
     }
   }
 
-  const sendClockTick = () => {
-    if (selectedOutputId.value) {
-      send(selectedOutputId.value, { type: 'clock' })
-    }
-  }
-
-  const sendStart = () => {
-    if (selectedOutputId.value) {
-      send(selectedOutputId.value, { type: 'start' })
-    }
-  }
-
-  const sendStop = () => {
-    if (selectedOutputId.value) {
-      send(selectedOutputId.value, { type: 'stop' })
-    }
-  }
-
-  const setSelectedInput = (id: string | null) => {
-    selectedInputId.value = id
-    attachSelectedInput()
-  }
-
-  const setSelectedOutput = (id: string | null) => {
-    selectedOutputId.value = id
-  }
-
   const mapNoteToPad = (note: number) => mapping.value.noteMap[note]
-  const setPadForNote = (note: number, padId: MidiMapping['noteMap'][number]) => {
-    if (padId) {
-      mapping.value.noteMap[note] = padId
-    } else {
-      delete mapping.value.noteMap[note]
-    }
-  }
-
-  if (typeof window !== 'undefined') {
-    handlePageHide = () => {
-      detachInputs()
-      if (access.value) {
-        access.value.onstatechange = null
-      }
-    }
-    handlePageShow = () => {
-      if (access.value) {
-        refreshDevices()
-        attachSelectedInput()
-        access.value.onstatechange = () => {
-          refreshDevices()
-          attachSelectedInput()
-        }
-      }
-    }
-    window.addEventListener('pagehide', handlePageHide)
-    window.addEventListener('pageshow', handlePageShow)
-  }
-
-  onBeforeUnmount(() => {
-    if (handlePageHide) {
-      window.removeEventListener('pagehide', handlePageHide)
-    }
-    if (handlePageShow) {
-      window.removeEventListener('pageshow', handlePageShow)
-    }
-    detachInputs()
-    if (access.value) {
-      access.value.onstatechange = null
-    }
-  })
 
   return {
     access,
     inputs,
     outputs,
     mapping,
-    selectedInputId,
-    selectedOutputId,
     supportsMidi,
     requestAccess,
     refreshDevices,
     listen,
     send,
-    sendClockTick,
-    sendStart,
-    sendStop,
-    mapNoteToPad,
-    setPadForNote,
-    setMapping: (next: MidiMapping) => {
-      mapping.value = next
-    },
-    setSelectedInput,
-    setSelectedOutput
+    mapNoteToPad
   }
 }
